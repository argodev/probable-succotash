#! /bin/bash

# create a temp file
tfile=$(mktemp)

echo "Using ${tfile}"

# helper functions
mk_div() {
    echo "" >> ${tfile}
    echo "========================================================" >> ${tfile}
    echo "= $1 " >> ${tfile}
    echo "" >> ${tfile}
}

# grab some files
# /etc/resolv.conf
# /etc/motd
# /etc/issue
# /etc/passwd
# /etc/shadow
# /home/**/.bash_history

# print kernel version/info
mk_div "uname -a"
uname -a >> ${tfile} 2>&1

# list all running processes
mk_div "ps -aux"
ps -aux >> ${tfile} 2>&1

# your current username, groups
mk_div "id"
id >> ${tfile} 2>&1

# who is connected, uptime, load avg
mk_div "w"
w >> ${tfile} 2>&1

# uptime, runlevel, tty, processes, etc.
mk_div "who -a"
who -a >> ${tfile} 2>&1

# current version of gcc
mk_div "gcc -v"
gcc -v >> ${tfile} 2>&1

# version of MySQL
mk_div "mysql --version"
mysql --version >> ${tfile} 2>&1

# version of perl
mk_div "perl -v"
perl -v >> ${tfile} 2>&1

# version of roby
mk_div "ruby -v"
ruby -v >> ${tfile} 2>&1

# version of python
mk_div "python --version"
python --version >> ${tfile} 2>&1

# mounted fs, size, % use, dev, mount point
mk_div "df -k"
df -k >> ${tfile} 2>&1

# mounted fs
mk_div "mount"
mount >> ${tfile} 2>&1

# last users logged on
mk_div "last -a"
last -a >> ${tfile} 2>&1

# lastcomm
mk_div "lastcomm"
lastcomm >> ${tfile} 2>&1

# lastlog
mk_div "lastlog"
lastlog >> ${tfile} 2>&1

# get status of SELinux
mk_div "getenforce"
getenforce >> ${tfile} 2>&1

# information from the last system boot
mk_div "dmesg"
dmesg >> ${tfile} 2>&1

# prints all PCI buses and devices
mk_div "lspci"
lspci >> ${tfile} 2>&1

# prints USB buses and devices
mk_div "lsusb"
lsusb >> ${tfile} 2>&1

# prints CPU information
mk_div "lscpu"
lscpu >> ${tfile} 2>&1

# lshw
mk_div "lshw"
lshw >> ${tfile} 2>&1

# cpu info
mk_div "cat /proc/cpuinfo"
cat /proc/cpuinfo >> ${tfile} 2>&1

# memory info
mk_div "cat /proc/meminfo"
cat /proc/meminfo >> ${tfile} 2>&1

# see if nmap is present
mk_div "which nmap"
which nmap >> ${tfile} 2>&1

# see if netcat is around
mk_div "which nc"
which nc >> ${tfile} 2>&1

# jps -l
mk_div "jps -l"
jps -l >> ${tfile} 2>&1

# java version
mk_div "java -version"
java -version >> ${tfile} 2>&1

###############################################################################
# NETWORK INFO
#

mk_div "hostname -f"
hostname -f >> ${tfile} 2>&1 

mk_div "ip addr show"
ip addr show >> ${tfile} 2>&1 

# show IP routing table
mk_div "ip ro show"
ip ro show >> ${tfile} 2>&1

mk_div "ifconfig -a"
ifconfig -a >> ${tfile} 2>&1

mk_div "route -n"
route -n >> ${tfile} 2>&1

mk_div "cat /etc/network/interfaces"
cat /etc/network/interfaces >> ${tfile} 2>&1

mk_div "iptables -L -n -v"
iptables -L -n -v >> ${tfile} 2>&1

mk_div "iptables -t nat -L -n -v"
iptables -t nat -L -n -v >> ${tfile} 2>&1

mk_div "ip6tables -L -n -v"
ip6tables -L -n -v >> ${tfile} 2>&1

mk_div "netstat -anop"
netstat -anop >> ${tfile} 2>&1

mk_div "ss -anop"
ss -anop >> ${tfile} 2>&1









